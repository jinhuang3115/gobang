<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>javaScript列表</title>
    <meta id="meta" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        .chessboard {
            height: 500px;
            width: 500px;
            border: 1px black solid;
            margin: 0 auto;
            position: relative;
            margin-top: 50px;
        }

        .row {
            list-style-type: none;
            border-bottom: 1px red solid;
            height: 49px;
        }

        .chessbox {
            height: 100%;
        }

        .cell {
            width: 49px;
            border-right: 1px red solid;
            float: left;
            height: 49px;
        }

        .cell:last-of-type {
            border-right: none;
        }

        .row:last-of-type {
            border-bottom: none;
        }
    </style>
</head>
<body>
<div class="outer">
    <div class="chessboard" id="chessboard"></div>
</div>
</body>
<script>
    const chessboard = document.querySelector("#chessboard");
    const boardHeight = 500;
    const boardWidth = 500;
    const offsetLeft = chessboard.offsetLeft;
    const offsetTop = chessboard.offsetTop;
    const boardAx = createBoardAx();
    const chessStyle = {
        height: "30px",
        width: "30px",
        'border-radius': '15px',
        'background-color': 'black',
        'position': 'absolute'
    };
    let obj = {
        x: [],
        y: []
    };

    function createBoardAx() {
        let arr = [];
        for(let i = 0, len = boardWidth / 50; i <= len; i++){
            arr.push([]);
            for(let j = 0, jlen = boardWidth / 50; j <= jlen; j++){
                arr[i].push(0);
            }
        }
        return arr;
    }


    function drawBoard() {
        let rowCount = boardHeight / 50;
        let _ul = "<ul class='chessbox'>";
        for (let i = 0; i < rowCount; i++) {
            _ul += '<li class="row">' + drawCell(boardAx[i]) + '</li>';
        }
        _ul += '</ul>';
        chessboard.innerHTML = _ul;
    }

    function drawCell(arr) {
        let _html = "";
        let cellCount = boardWidth / 50;
        for (let i = 0; i < cellCount; i++) {
            _html += "<div class='cell'></div>";
        }
        return _html;
    }

    function drawChess(x, y) {
        let chess = document.createElement('div');
        for (let key in chessStyle) {
            chess.style[key] = chessStyle[key];
        }
        let xCount = Math.round(x / 50);
        let yCount = Math.round(y / 50);

        if (boardAx[yCount][xCount]) {
            return;
        }
        boardAx[yCount][xCount] = 1;
        obj.x.push(xCount);
        obj.y.push(yCount);
        let left = 50 * xCount - parseInt(chessStyle.width, 10) / 2;
        let top = 50 * yCount - parseInt(chessStyle.height, 10) / 2;
        chess.style.top = top + "px";
        chess.style.left = left + "px";
        chessboard.appendChild(chess);
        isWin({
            x: xCount,
            y: yCount
        });
    }

    function isWin(o) {
        let xLine = boardAx[o.y];
        let yLine = boardAx.map(function(arr){
            return arr[o.x];
        });
        let leftLine = [];
        let rightLine = [];
        boardAx.map(function (arr, index) {
            let leftItem = arr[o.x - (o.y - index)];
            let rightItem = arr[o.x + (o.y - index)]
            if (typeof leftItem !== 'undefined'){
                leftLine.push(leftItem);
            }
            if (typeof rightItem !== 'undefined'){
                rightLine.push(rightItem)
            }


        });
        console.log(rightLine)
    }

    chessboard.addEventListener('click', function (e) {
        let x = e.clientX;
        let y = e.clientY;
        drawChess(x - offsetLeft, y - offsetTop);
    }, false);

    drawBoard();
</script>
</html>